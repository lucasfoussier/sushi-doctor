parameters:
    app.stage: "%env(resolve:APP_STAGE)%"
    aws.key: "%env(resolve:AWS_KEY)%"
    aws.secret: "%env(resolve:AWS_SECRET)%"
    aws.deployment.region: "%env(resolve:AWS_DEPLOYMENT_REGION)%"
    aws.dynamodb.endpoint: "%env(resolve:AWS_DYNAMO_DB_ENDPOINT)%"
services:
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
        bind:
            $appStage: '%app.stage%'
    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Kernel.php'
            - '../src/Tests/'
    App\Controller\:
        resource: '../src/Controller/'
        tags: ['controller.service_arguments']

#    AppNameGetter:
#        class: App\DynamoDb\AppNameGetter

    JLucki\ODM\Spark\Spark:
        $version: 'latest'
        $region: '%aws.deployment.region%'
        $endpoint: '%aws.dynamodb.endpoint%'
        $key: '%aws.key%'
        $secret: '%aws.secret%'

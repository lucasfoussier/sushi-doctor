parameters:
    app.stage: "%env(resolve:APP_STAGE)%"
    aws.key: "%env(resolve:AWS_KEY)%"
    aws.secret: "%env(resolve:AWS_SECRET)%"
    aws.deployment.region: "%env(resolve:AWS_DEPLOYMENT_REGION)%"
    aws.dynamodb.endpoint: "%env(resolve:AWS_DYNAMO_DB_ENDPOINT)%"
    table.prefix: !php/const DYNAMODB_TABLE_PREFIX
services:
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
        bind:
            $appStage: '%app.stage%'
    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Kernel.php'
            - '../src/Tests/'
    App\Controller\:
        resource: '../src/Controller/'
        tags: ['controller.service_arguments']
    JLucki\ODM\Spark\Spark:
        $version: 'latest'
        $region: '%aws.deployment.region%'
        $endpoint: '%aws.dynamodb.endpoint%'
        $key: '%aws.key%'
        $secret: '%aws.secret%'
    app.jwt_token_authenticator:
        class: App\Security\Guard\JWTTokenAuthenticator
        parent: lexik_jwt_authentication.security.guard.jwt_token_authenticator
    app.jwt_token_authenticator:
        class: App\Security\Guard\JWTTokenAuthenticator
        parent: lexik_jwt_authentication.security.guard.jwt_token_authenticator
